<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <script src="../js/jquery-3.7.1.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
    <link rel="stylesheet" href="../css/NewProduct.css">
    
</head>
<body>
  <div class="header">
    <div class="navbar-custom">
      <ul class="nav nav-links">
        <li class="nav-item">
          <a href="../index.html">
            <img src="../img/logo.png" alt="Logo">
          </a>
        </li>
        <li class="nav-item" id="auth-link"></li>
        <li class="nav-item">
          <a class="nav-link" href="#" onclick="goToThanhToan(event)">Thanh to√°n</a>
        </li>
        <li class="nav-item">
          <a class="nav-link disabled" href="#">CONTACT : 086868686</a>
        </li>
      </ul>
    
      <div class="search-wrapper">
        <input type="text" placeholder="What are you looking for?">
        <button type="submit">
          <i class="fas fa-search"></i>
        </button>
      </div>
    </div>
    <div class="menu-wrapper">
      <div class="menu-left">
        <div class="menu-item">
          <a href="../html/NewProduct.html" style="text-decoration: none; color: white;">
            <i class="fas fa-shopping-basket"></i> New Products
          </a>
        </div>
        <div class="menu-item">
          <a href="../index.html#best-sales" style="text-decoration: none; color: white;">
            Best Sales <span class="badge">HOT</span>
          </a>
          
        </div>
        <div class="menu-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="offersDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Danh m·ª•c hoa
          </a>
          <div class="dropdown-menu" aria-labelledby="offersDropdown">
            <a class="dropdown-item" href="../index.html#hoa-sn">Hoa Sinh Nh·∫≠t</a>
            <a class="dropdown-item" href="../index.html#hoa-kt">Hoa Khai Tr∆∞∆°ng</a>
            <a class="dropdown-item" href="../index.html#lan-hd">Lan H·ªì ƒêi·ªáp</a>
          </div>
        </div>
        
        <div class="menu-item">News</div>
      </div>
    
      <div class="menu-right">
        <a href="../html/GioHang.html" class="cart-icon">
          <i class="fas fa-shopping-cart"></i>
          <span id="cart-count">0</span>
        </a>
      </div>
    </div>
  </div>
  <section class="category-section">
    <h2 class="category-title">
      New <span>Products</span>
    </h2>
  </section>
  <section class="products-section">
      <div class="row" id="productsContainer">
        <div class="col-6 col-md-4 col-lg-3 mb-5">
          <div class="products-box">
            <img src="../img/pr1.png" alt="Caramel Ng·ªçt Ng√†o">
            <p class="name mb-1">Caramel Ng·ªçt Ng√†o</p>
            <p class="price mb-2">350.000‚Ç´</p>
            <button class="btn btn-success btn-order" data-name="Caramel Ng·ªçt Ng√†o" data-price="350000">Mua Ngay</button>
          </div>
        </div>
        <div class="col-6 col-md-4 col-lg-3">
          <div class="products-box">
            <img src="../img/pr2.png" alt="B√¥ng G√≤n">
            <p class="name mb-1">B√¥ng G√≤n</p>
            <p class="price mb-2">250.000‚Ç´</p>
            <button class="btn btn-success btn-order" data-name="B√¥ng G√≤n" data-price="250000">Mua Ngay</button>
          </div>
        </div>
        <div class="col-6 col-md-4 col-lg-3">
          <div class="products-box">
            <img src="../img/pr3.png" alt="Red Rose">
            <p class="name mb-1">Red Rose</p>
            <p class="price mb-2">300.000‚Ç´</p>
            <button class="btn btn-success btn-order" data-name="Red Rose" data-price="300000">Mua Ngay</button>
          </div>
        </div>
        <div class="col-6 col-md-4 col-lg-3">
          <div class="products-box">
            <img src="../img/pr4.png" alt="Gi·ªè Hoa R·ª±c R·ª°">
            <p class="name mb-1">Gi·ªè Hoa R·ª±c R·ª°</p>
            <p class="price mb-2">500.000‚Ç´</p>
            <button class="btn btn-success btn-order" data-name="Gi·ªè Hoa R·ª±c R·ª°" data-price="500000">Mua Ngay</button>
          </div>
        </div>
        <div class="col-6 col-md-4 col-lg-3">
          <div class="products-box">
            <img src="../img/new1.png" alt="Gi·ªè Hoa Y√™u Th∆∞∆°ng R·ª±c R·ª° 621">
            <p class="name mb-1">Gi·ªè Hoa Y√™u Th∆∞∆°ng R·ª±c R·ª° 621</p>
            <p class="price mb-2">3.500.000‚Ç´</p>
            <button class="btn btn-success btn-order" data-name="Gi·ªè Hoa Y√™u Th∆∞∆°ng R·ª±c R·ª° 621" data-price="3500000">Mua Ngay</button>
          </div>
        </div>
        <div class="col-6 col-md-4 col-lg-3">
          <div class="products-box">
            <img src="../img/new2.png" alt="B√≥ Hoa Me Before You">
            <p class="name mb-1">B√≥ Hoa Me Before You</p>
            <p class="price mb-2">2.050.000‚Ç´</p>
            <button class="btn btn-success btn-order" data-name="B√≥ Hoa Me Before You" data-price="2050000">Mua Ngay</button>
          </div>
        </div>
        <div class="col-6 col-md-4 col-lg-3">
          <div class="products-box">
            <img src="../img/new3.png" alt="B√≥ Hoa Y√™u Th∆∞∆°ng N·ªìng ·∫§m 020">
            <p class="name mb-1">B√≥ Hoa Y√™u Th∆∞∆°ng N·ªìng ·∫§m 020</p>
            <p class="price mb-2">3.000.000‚Ç´</p>
            <button class="btn btn-success btn-order" data-name="B√≥ Hoa Y√™u Th∆∞∆°ng N·ªìng ·∫§m 020" data-price="3000000">Mua Ngay</button>
          </div>
        </div>
        <div class="col-6 col-md-4 col-lg-3">
          <div class="products-box">
            <img src="../img/new4.png" alt="Gi·ªè Hoa M√≥n Qu√† H·∫°nh Ph√∫c 650">
            <p class="name mb-1">Gi·ªè Hoa M√≥n Qu√† H·∫°nh Ph√∫c 650</p>
            <p class="price mb-2">50.000.000‚Ç´</p>
            <button class="btn btn-success btn-order" data-name="Gi·ªè Hoa M√≥n Qu√† H·∫°nh Ph√∫c 650" data-price="50000000">Mua Ngay</button>
          </div>
        </div>
        
      </div>
  </section>
  <hr style="border: none; height: 2px; background-color:rgb(228, 155, 146);">
  <footer  class="py-5" style="color: rgb(229, 171, 163);">
    <div class="container">
      <div class="row">
        <div class="col-md-3 mb-4">
          <img src="../img/logo.png" alt="FlowerCorner logo" class="mb-3" style="max-width: 150px;">
          <p class="mb-1">Hotline: 1999 999 999 - 0888 888 888</p>
          <p class="mb-3">Email: lafleur@gmail.com</p>
  
          <img src="../img/qr-code.png" alt="QR Code" class="mb-2" style="width: 100px;">
          <p class="mb-2">T·∫£i ·ª©ng d·ª•ng ngay!</p>
          <div class="d-flex">
            <img src="../img/appstore.png" alt="App Store" class="mr-2" style="width: 110px;">
            <img src="../img/ggplay.png" alt="Google Play" style="width: 110px;">
          </div>
        </div>
  
        <!-- Customer Care -->
        <div class="col-md-3 mb-4">
          <h5 class="font-weight-bold mb-3">CHƒÇM S√ìC KH√ÅCH H√ÄNG</h5>
          <ul class="list-unstyled" >
            <li><a href="#">Gi·ªõi Thi·ªáu</a></li>
            <li><a href="#">Li√™n H·ªá</a></li>
            <li><a href="#">Ch√≠nh S√°ch V·∫≠n Chuy·ªÉn</a></li>
            <li><a href="#">C√¢u H·ªèi Th∆∞·ªùng G·∫∑p</a></li>
            <li><a href="#">H√¨nh Th·ª©c Thanh To√°n</a></li>
            <li><a href="#">B·∫£o M·∫≠t Th√¥ng Tin</a></li>
            <li><a href="#">Ch√≠nh S√°ch Ho√†n Ti·ªÅn</a></li>
            <li><a href="#">X·ª≠ L√Ω Khi·∫øu N·∫°i</a></li>
            <li><a href="#">T·∫°i Sao N√™n Ch·ªçn FlowerCorner.vn</a></li>
            <li><a href="#">Blog</a></li>
          </ul>
        </div>
  
        <!-- Social -->
        <div class="col-md-2 mb-4">
          <h5 class="font-weight-bold mb-3">THEO D√ïI</h5>
          <ul class="list-unstyled">
            <li><a href="#">Facebook</a></li>
            <li><a href="#">Twitter</a></li>
            <li><a href="#">Instagram</a></li>
            <li><a href="#">LinkedIn</a></li>
            <li><a href="#">YouTube</a></li>
          </ul>
        </div>
  
        <!-- Shop Info -->
        <div class="col-md-4">
          <h5 class="font-weight-bold mb-3">SHOP HOA LAFLEUR</h5>
          <p><strong>C·ª≠a h√†ng ch√≠nh:</strong><br>1 , P.5, Q.1, TP.HCM</p>
          <p><strong>C·ª≠a H√†ng TP.HCM:</strong><br>111 , P.5, Q.1, TP.HCM</p>
          <p><strong>Chi nh√°nh H√† N·ªôi:</strong><br>11, Ba ƒê√¨nh, H√† N·ªôi</p>
          <p><strong>C√îNG TY TNHH NKT</strong><br>M√£ s·ªë thu·∫ø: 0123456789</p>
        </div>
  
      </div>
    </div>
  </footer>
  <script>
    function updateAuthLink() {
      const isLoggedIn = localStorage.getItem('isLoggedIn');
      const authLink = document.getElementById('auth-link');

      if (isLoggedIn) {
        authLink.innerHTML = `<a class="nav-link" href="#" onclick="logout()">ƒêƒÉng xu·∫•t</a>`;
      } else {
        authLink.innerHTML = `<a class="nav-link" href="../html/DangNhap.html">ƒêƒÉng nh·∫≠p</a>`;
      }
    }

    function logout() {
      localStorage.removeItem('isLoggedIn');
      localStorage.removeItem('user');
      localStorage.removeItem('cart');
      alert("B·∫°n ƒë√£ ƒëƒÉng xu·∫•t!");
      updateAuthLink();
      window.location.href = "../index.html";
    }
    document.addEventListener('DOMContentLoaded', updateAuthLink);
    function goToThanhToan(event) {
      event.preventDefault();
      const isLoggedIn = localStorage.getItem('isLoggedIn');
      if (!isLoggedIn) {
        alert("B·∫°n c·∫ßn ƒëƒÉng nh·∫≠p ƒë·ªÉ ti·∫øp t·ª•c thanh to√°n!");
        window.location.href = "../html/DangNhap.html"; // ƒë·ªïi n·∫øu trang login kh√°c
      } else {
        window.location.href = "./ThanhToan.html";
      }
    }
    // C·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng gi·ªè h√†ng hi·ªÉn th·ªã
    function updateCartCount() {
      let cart = JSON.parse(localStorage.getItem('cart')) || [];
      let totalQuantity = 0;
      cart.forEach(item => {
        totalQuantity += item.quantity;
      });
      const cartCountElement = document.getElementById('cart-count');
      if (cartCountElement) {
        cartCountElement.innerText = totalQuantity;
      }
    }
  
    // X·ª≠ l√Ω khi b·∫•m "Mua Ngay"
    document.querySelectorAll('.btn-order').forEach(button => {
      button.addEventListener('click', function(event) {
        event.preventDefault();
  
        // 1. Ki·ªÉm tra ƒëƒÉng nh·∫≠p
        let isLoggedIn = localStorage.getItem('isLoggedIn');
        if (!isLoggedIn) {
          alert("B·∫°n c·∫ßn ƒëƒÉng nh·∫≠p ƒë·ªÉ mua s·∫£n ph·∫©m!");
          window.location.href = "../html/DangNhap.html";
          return;
        }
  
        // 2. L·∫•y th√¥ng tin s·∫£n ph·∫©m t·ª´ data-attribute
        const name = this.getAttribute('data-name');
        const price = parseInt(this.getAttribute('data-price'));
  
        // 3. L·∫•y gi·ªè h√†ng t·ª´ localStorage
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
  
        // 4. Ki·ªÉm tra xem s·∫£n ph·∫©m ƒë√£ c√≥ trong gi·ªè ch∆∞a
        const existingItem = cart.find(item => item.name === name);
        if (existingItem) {
          existingItem.quantity += 1;
        } else {
          cart.push({ name, price, quantity: 1 });
        }
  
        // 5. L∆∞u l·∫°i v√†o localStorage v√† c·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng hi·ªÉn th·ªã
        localStorage.setItem('cart', JSON.stringify(cart));
        updateCartCount(); // üëà G·ªçi h√†m c·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng
        alert("ƒê√£ th√™m v√†o gi·ªè h√†ng!");
      });
    });
  
    // C·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng ngay khi trang load
    updateCartCount();
  </script>
</body>
</html>